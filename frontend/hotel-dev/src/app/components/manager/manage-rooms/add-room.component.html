<div class="container py-4">
  <h2 class="mb-4">Add New Room</h2>

  <div class="card">
    <div class="card-body">
      <form [formGroup]="addRoomForm" (ngSubmit)="onSubmit()">
        <!-- Room Number -->
        <div class="mb-3">
          <label class="form-label">Room Number</label>
          <input
            type="text"
            class="form-control"
            formControlName="Number"
            placeholder="e.g., 101, 202, etc."
            [ngClass]="{
              'is-invalid':
                addRoomForm.get('Number')?.invalid &&
                addRoomForm.get('Number')?.touched
            }"
          />
          <div class="invalid-feedback">Room number is required.</div>
        </div>

        <!-- Room Type -->
        <div class="mb-3">
          <label class="form-label">Room Type</label>
          <select
            class="form-control"
            formControlName="Type"
            [ngClass]="{
              'is-invalid':
                addRoomForm.get('Type')?.invalid &&
                addRoomForm.get('Type')?.touched
            }"
          >
            <option value="">Select Room Type</option>
            <option *ngFor="let type of roomTypes; let i = index" [value]="i">
              {{ type }}
            </option>
          </select>
          <div class="invalid-feedback">Room type is required.</div>
        </div>

        <!-- Price -->
        <div class="mb-3">
          <label class="form-label">Base Price (USD)</label>
          <input
            type="number"
            class="form-control"
            formControlName="Price"
            min="1"
            step="0.01"
            placeholder="e.g., 120.00"
            [ngClass]="{
              'is-invalid':
                addRoomForm.get('Price')?.invalid &&
                addRoomForm.get('Price')?.touched
            }"
          />
          <div class="invalid-feedback">Price must be greater than 0.</div>
        </div>

        <!-- Capacity -->
        <div class="mb-3">
          <label class="form-label">Capacity (Number of Guests)</label>
          <input
            type="number"
            class="form-control"
            formControlName="Capacity"
            min="1"
            max="10"
            [ngClass]="{
              'is-invalid':
                addRoomForm.get('Capacity')?.invalid &&
                addRoomForm.get('Capacity')?.touched
            }"
          />
          <div class="invalid-feedback">Capacity must be at least 1.</div>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea
            class="form-control"
            rows="3"
            formControlName="Description"
            placeholder="Describe the room features..."
          ></textarea>
        </div>

        <!-- Availability -->
        <div class="mb-3">
          <label class="form-label">Availability</label>
          <select
            class="form-control"
            formControlName="Available"
            [ngClass]="{
              'is-invalid':
                addRoomForm.get('Available')?.invalid &&
                addRoomForm.get('Available')?.touched
            }"
          >
            <option value="">Select Availability</option>
            <option *ngFor="let status of roomStates" [value]="status.value">
              {{ status.label }}
            </option>
          </select>
          <div class="invalid-feedback">Select room availability.</div>
        </div>

        <!-- Submit Buttons -->
        <div class="d-flex gap-2">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="isSubmitting"
          >
            <span
              *ngIf="isSubmitting"
              class="spinner-border spinner-border-sm me-2"
            ></span>
            {{ isSubmitting ? "Adding..." : "Add Room" }}
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancel()">
            Cancel
          </button>
          <!-- TEST BUTTON - Remove this later -->
          <button type="button" class="btn btn-warning" (click)="testClick()">
            Test Click
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
